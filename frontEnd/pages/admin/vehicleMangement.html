<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vehicle Management - DriveMaster Admin</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f5f7f9;
        margin: 0;
      }

      nav {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .nav-bar {
        height: 75px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 30px;
      }

      .logo {
        display: flex;
        align-items: center;
        color: white;
        font-weight: bold;
        font-size: 20px;
      }

      .logo i {
        margin-right: 10px;
        font-size: 24px;
      }

      .menu-container {
        display: flex;
        align-items: center;
      }

      .menu-item {
        position: relative;
        margin-left: 15px;
      }

      .menu-item > a {
        color: white;
        text-decoration: none;
        font-weight: 600;
        font-size: 16px;
        padding: 10px 20px;
        border-radius: 5px;
        transition: background-color 0.3s;
        display: flex;
        align-items: center;
      }

      .menu-item > a:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .menu-item > a i {
        margin-right: 8px;
      }

      .dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        min-width: 200px;
        border-radius: 5px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        opacity: 0;
        visibility: hidden;
        transform: translateY(10px);
        transition: all 0.3s;
        z-index: 1000;
      }

      .menu-item:hover .dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      .dropdown a {
        display: block;
        padding: 12px 20px;
        color: #333;
        text-decoration: none;
        border-bottom: 1px solid #f0f0f0;
        transition: background-color 0.2s;
      }

      .dropdown a:hover {
        background-color: #f8f9fa;
        color: #1a2a6c;
      }

      .dropdown a i {
        margin-right: 10px;
        color: #6c757d;
      }

      .user-profile {
        display: flex;
        align-items: center;
        color: white;
        margin-left: 20px;
      }

      .user-profile img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .dashboard-container {
        max-width: 1200px;
        margin: 30px auto;
        padding: 0 20px;
      }

      .welcome-banner {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f);
        border-radius: 12px;
        padding: 25px 30px;
        color: white;
        margin-bottom: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .welcome-banner h1 {
        font-size: 28px;
        margin-bottom: 10px;
        font-weight: 600;
        display: flex;
        align-items: center;
      }

      .welcome-banner h1 i {
        margin-right: 10px;
      }

      .welcome-banner p {
        opacity: 0.9;
        font-size: 16px;
      }

      .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
      }

      .page-title {
        font-size: 24px;
        font-weight: 600;
        color: #2c3e50;
        display: flex;
        align-items: center;
      }

      .page-title i {
        margin-right: 10px;
        color: #b21f1f;
      }

      .stats-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: white;
        border-radius: 10px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        display: flex;
        flex-direction: column;
      }

      .stat-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .stat-card-title {
        font-size: 18px;
        color: #2c3e50;
        font-weight: 600;
        display: flex;
        align-items: center;
      }

      .stat-card-title i {
        margin-right: 10px;
        color: #b21f1f;
      }

      .stat-card-value {
        font-size: 32px;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 5px;
      }

      .stat-card-desc {
        color: #6c757d;
        font-size: 14px;
      }

      .dashboard-card {
        background: white;
        border-radius: 10px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        margin-bottom: 25px;
      }

      .dashboard-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
      }

      .dashboard-card-title {
        font-size: 18px;
        font-weight: 600;
        color: #2c3e50;
        display: flex;
        align-items: center;
      }

      .dashboard-card-title i {
        margin-right: 10px;
        color: #b21f1f;
      }

      .view-all-link {
        color: #1a2a6c;
        font-weight: 600;
        font-size: 14px;
        text-decoration: none;
      }

      .view-all-link:hover {
        text-decoration: underline;
      }

      .table-container {
        overflow-x: auto;
      }

      .vehicle-table {
        width: 100%;
        border-collapse: collapse;
      }

      .vehicle-table th,
      .vehicle-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #eee;
      }

      .vehicle-table th {
        background-color: #f8f9fa;
        font-weight: 600;
        color: #2c3e50;
      }

      .vehicle-table tr:hover {
        background-color: #f8f9fa;
      }

      .status-badge {
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: 600;
      }

      .status-available {
        background-color: #e7f6ef;
        color: #0e9f6e;
      }

      .status-unavailable {
        background-color: #fde8e8;
        color: #e02424;
      }

      .form-container {
        background: white;
        border-radius: 10px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        margin-bottom: 25px;
      }

      .form-header {
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
      }

      .form-title {
        font-size: 18px;
        font-weight: 600;
        color: #2c3e50;
        display: flex;
        align-items: center;
      }

      .form-title i {
        margin-right: 10px;
        color: #b21f1f;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
      }

      .form-input {
        width: 100%;
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
      }

      .form-input:focus {
        outline: none;
        border-color: #1a2a6c;
      }

      .form-select {
        width: 100%;
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
        background-color: white;
      }

      .form-actions {
        display: flex;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .btn {
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        transition: all 0.3s;
        border: none;
      }

      .btn i {
        margin-right: 8px;
      }

      .btn-cancel {
        background-color: #f8f9fa;
        color: #6c757d;
        margin-right: 10px;
      }

      .btn-cancel:hover {
        background-color: #e9ecef;
      }

      .btn-submit {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f);
        color: white;
      }

      .btn-submit:hover {
        opacity: 0.9;
      }

      .info-message {
        background-color: #ebf5ff;
        border-left: 4px solid #3f83f8;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
        display: flex;
        align-items: center;
      }

      .info-message i {
        color: #3f83f8;
        margin-right: 10px;
        font-size: 18px;
      }

      .action-buttons {
        display: flex;
        gap: 8px;
      }

      .action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
      }

      .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .btn-view {
        background-color: #3498db;
        color: white;
      }

      .btn-view:hover {
        background-color: #2980b9;
      }

      .btn-edit {
        background-color: #f39c12;
        color: white;
      }

      .btn-edit:hover {
        background-color: #e67e22;
      }

      .btn-delete {
        background-color: #e74c3c;
        color: white;
      }

      .btn-delete:hover {
        background-color: #c0392b;
      }

      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
      }

      .modal {
        background: white;
        padding: 25px;
        border-radius: 10px;
        text-align: center;
        max-width: 400px;
        width: 90%;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }

      .modal h3 {
        margin-bottom: 10px;
        color: #e74c3c;
      }

      .modal-actions {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        gap: 10px;
      }

      @media (max-width: 768px) {
        .nav-bar {
          padding: 0 15px;
        }

        .logo span {
          display: none;
        }

        .menu-item > a span {
          display: none;
        }

        .menu-item > a i {
          margin-right: 0;
          font-size: 20px;
        }

        .user-profile span {
          display: none;
        }

        .stats-container {
          grid-template-columns: 1fr;
        }

        .page-header {
          flex-direction: column;
          align-items: flex-start;
        }

        .action-button {
          margin-top: 15px;
        }

        .form-actions {
          flex-direction: column;
        }

        .btn {
          width: 100%;
          margin-bottom: 10px;
          justify-content: center;
        }

        .btn-cancel {
          margin-right: 0;
        }
      }

      #messageBox {
        margin-top: 10px;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 14px;
        display: inline-block;
      }
      .success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .hidden {
        display: none;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <nav>
      <div class="nav-bar">
        <div class="logo">
          <i class="fas fa-car-side"></i>
          <span>DriveMaster Admin</span>
        </div>

        <div class="menu-container">
          <div class="menu-item">
            <a href="/pages/admin/dashboard.html"
              ><i class="fas fa-home"></i> <span>Home</span></a
            >
          </div>

          <div class="menu-item">
            <a href=""
              ><i class="fas fa-users"></i> <span>Student Portal</span></a
            >
            <div class="dropdown">
              <a href="/pages/admin/studentManagement.html"
                ><i class="fas fa-list"></i> View All Students</a
              >
              <a href="/pages/admin/studentRegistration.html"
                ><i class="fas fa-user-plus"></i> Manage Student</a
              >
              <a href="#"><i class="fas fa-chart-bar"></i> Student Progress</a>
              <a href="#"><i class="fas fa-file-export"></i> Export Data</a>
            </div>
          </div>

          <div class="menu-item">
            <a href="#"
              ><i class="fas fa-chalkboard-teacher"></i>
              <span>Instructors</span></a
            >
            <div class="dropdown">
              <a href="instuctorManagement.html"
                ><i class="fas fa-list"></i> View Instructors</a
              >
              <a href="instuctorManagement.html#add-instructor"
                ><i class="fas fa-user-plus"></i> Add Instructor</a
              >
              <a href="#"><i class="fas fa-calendar-alt"></i> Schedules</a>
            </div>
          </div>

          <div class="menu-item">
            <a href="#"><i class="fas fa-cog"></i> <span>Settings</span></a>
          </div>

          <div class="user-profile">
            <img
              src="https://ui-avatars.com/api/?name=Admin+User&background=random"
              alt="Admin User"
            />
            <span>Admin</span>
          </div>
        </div>
      </div>
    </nav>

    <div class="dashboard-container">
      <div class="welcome-banner">
        <h1><i class="fas fa-car"></i> Vehicle Management</h1>
        <p>Manage your fleet of training vehicles efficiently</p>
      </div>

      <div class="page-header">
        <div class="page-title">
          <i class="fas fa-car"></i> Vehicle Fleet Overview
        </div>
      </div>

      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-card-header">
            <div class="stat-card-title">
              <i class="fas fa-check-circle"></i> Available Vehicles
            </div>
          </div>
          <div class="stat-card-value">12</div>
          <div class="stat-card-desc">Vehicles currently available for use</div>
        </div>

        <div class="stat-card">
          <div class="stat-card-header">
            <div class="stat-card-title">
              <i class="fas fa-times-circle"></i> Unavailable Vehicles
            </div>
          </div>
          <div class="stat-card-value">5</div>
          <div class="stat-card-desc">Vehicles currently not available</div>
        </div>
      </div>

      <div class="form-container">
        <div class="form-header">
          <div class="form-title">
            <i class="fas fa-plus-circle"></i> Add New Vehicle
          </div>
        </div>

        <div class="info-message">
          <i class="fas fa-info-circle"></i>
          <span
            >Add a new vehicle to the fleet. Vehicle number must be
            unique.</span
          >
        </div>

        <form id="addVehicleForm" action="" method="POST">
          <div class="form-group">
            <label class="form-label" for="vehicle_number"
              >Vehicle Number *</label
            >
            <input
              type="text"
              class="form-input"
              id="vehicle_number"
              name="vehicle_number"
              placeholder="Enter vehicle number (e.g., DM-001)"
              required
            />
          </div>

          <div class="form-group">
            <label class="form-label" for="availability"
              >Availability Status *</label
            >
            <select
              class="form-select"
              id="availability"
              name="availability"
              required
            >
              <option value="">Select availability status</option>
              <option value="Available">Available</option>
              <option value="Unavailable">Unavailable</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" for="vehicle_type">Vehicle Type *</label>
            <input
              type="text"
              class="form-input"
              id="vehicle_type"
              name="vehicle_type"
              placeholder="Enter vehicle type (e.g., Sedan, SUV, Compact)"
              required
            />
          </div>

          <div class="form-actions">
            <button type="reset" class="btn btn-cancel">
              <i class="fas fa-times"></i> Clear Form
            </button>
            <button type="submit" class="btn btn-submit">
              <i class="fas fa-plus"></i> Add Vehicle
            </button>
          </div>
        </form>
      </div>

      <div class="dashboard-card">
        <div class="dashboard-card-header">
          <div class="dashboard-card-title">
            <i class="fas fa-list"></i> All Vehicles
          </div>
          <a href="#" class="view-all-link">Export Data</a>
        </div>

        <div class="table-container">
          <table class="vehicle-table">
            <thead>
              <tr>
                <th>Vehicle Number</th>
                <th>Availability</th>
                <th>Vehicle Type</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <div id="confirmModal" class="hidden modal-overlay">
      <div class="modal">
        <h3>Confirm Deletion</h3>
        <p>Are you sure you want to delete this vehicle?</p>
        <div class="modal-actions">
          <button id="confirmYes" class="btn btn-delete">
            <i class="fas fa-check"></i> Yes
          </button>
          <button id="confirmNo" class="btn btn-cancel">
            <i class="fas fa-times"></i> No
          </button>
        </div>
      </div>
    </div>

    <div id="messageBox" class="hidden"></div>
    <script>
      const token = localStorage.getItem("token");

      function checkToken() {
        if (!token || token === "undefined" || token === "null") {
          showMessage("Please log in to continue", "error");
          setTimeout(() => {
            window.location.href = "/pages/employeelogin.html";
          }, 1500);
          return;
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        loadData();
      });

      function loadData() {
        loadTableAndOtherStats();
      }

      async function loadTableAndOtherStats() {
        try {
          const response = await fetch(
            "http://localhost:8080/admin/getVehicles",
            {
              headers: {
                "Content-Type": "application/json",
                Authorization: `Bearer ${token}`,
              },
            }
          );

          if (!response.ok) throw new Error("Failed to fetch vehicle data");

          const result = await response.json();
          const data = result.data;

          document
            .querySelectorAll(".stat-card")[0]
            .querySelector(".stat-card-value").textContent =
            data.availableVehicleCount;
          document
            .querySelectorAll(".stat-card")[1]
            .querySelector(".stat-card-value").textContent =
            data.unavailableVehicleCount;

          const tbody = document.querySelector(".vehicle-table tbody");
          tbody.innerHTML = "";

          data.vehicles.forEach((vehicle) => {
            const tr = document.createElement("tr");

            const tdNumber = document.createElement("td");
            tdNumber.textContent = vehicle.vehicleNumber;
            tr.appendChild(tdNumber);

            const tdAvailability = document.createElement("td");
            tdAvailability.textContent = vehicle.availability;
            tdAvailability.classList.add(
              "status-badge",
              vehicle.availability === "Available"
                ? "status-available"
                : "status-unavailable"
            );
            tr.appendChild(tdAvailability);

            const tdType = document.createElement("td");
            tdType.textContent = vehicle.vehicleType;
            tr.appendChild(tdType);

            const tdActions = document.createElement("td");
            tdActions.classList.add("action-buttons");

            const viewBtn = document.createElement("button");
            viewBtn.innerHTML = '<i class="fas fa-eye"></i>';
            viewBtn.classList.add("action-btn", "btn-view");
            viewBtn.title = "View Vehicle Details";
            viewBtn.addEventListener("click", () => {
              loadVehicleToForm(vehicle, false);
            });

            const editBtn = document.createElement("button");
            editBtn.innerHTML = '<i class="fas fa-edit"></i>';
            editBtn.classList.add("action-btn", "btn-edit");
            editBtn.title = "Edit Vehicle";
            editBtn.addEventListener("click", () => {
              loadVehicleToForm(vehicle, true);
            });

            const deleteBtn = document.createElement("button");
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.classList.add("action-btn", "btn-delete");
            deleteBtn.title = "Delete Vehicle";

            deleteBtn.addEventListener("click", () => {
              showDeleteConfirmation(vehicle.vehicleNumber);
            });

            tdActions.appendChild(viewBtn);
            tdActions.appendChild(editBtn);
            tdActions.appendChild(deleteBtn);

            tr.appendChild(tdActions);
            tbody.appendChild(tr);
          });
        } catch (error) {
          console.error("Error loading vehicle data:", error);
          showMessage(
            "Failed to load vehicle data. Please try again.",
            "error"
          );
        }
      }

      function showDeleteConfirmation(vehicleNumber) {
        const modal = document.getElementById("confirmModal");
        modal.classList.remove("hidden");

        const yesBtn = document.getElementById("confirmYes");
        const noBtn = document.getElementById("confirmNo");

        yesBtn.onclick = () => {
          deleteVehicle(vehicleNumber);
          modal.classList.add("hidden");
        };

        noBtn.onclick = () => {
          modal.classList.add("hidden");
        };
      }

      function loadVehicleToForm(vehicle, isEditable = false) {
        const vehicleNumberInput = document.getElementById("vehicle_number");
        const availabilitySelect = document.getElementById("availability");
        const vehicleTypeInput = document.getElementById("vehicle_type");
        const submitBtn = document.querySelector(".btn-submit");
        const cancelBtn = document.querySelector(".btn-cancel");

        vehicleNumberInput.value = vehicle.vehicleNumber;
        availabilitySelect.value = vehicle.availability;
        vehicleTypeInput.value = vehicle.vehicleType;

        vehicleNumberInput.readOnly = true;
        vehicleTypeInput.readOnly = !isEditable;
        availabilitySelect.disabled = !isEditable;

        if (isEditable) {
          submitBtn.style.display = "inline-flex";
          submitBtn.innerHTML =
            '<i class="fas fa-sync-alt"></i> Update Vehicle';
          submitBtn.style.background =
            "linear-gradient(135deg, #1a2a6c, #b21f1f)";
          submitBtn.onclick = (e) => {
            e.preventDefault();
            updateVehicle(vehicle.vehicleNumber);
          };
          cancelBtn.textContent = "Cancel";
          cancelBtn.onclick = () => resetFormToAddMode();
        } else {
          submitBtn.style.display = "none";
          cancelBtn.textContent = "Close";
          cancelBtn.onclick = () => resetFormToAddMode();
        }
      }

      async function updateVehicle(vehicleNumber) {
        const availability = document.getElementById("availability").value;
        const vehicleType = document.getElementById("vehicle_type").value;

        try {
          const response = await fetch(
            `http://localhost:8080/admin/updateVehicle/${vehicleNumber}`,
            {
              method: "PUT",
              headers: {
                "Content-Type": "application/json",
                Authorization: `Bearer ${token}`,
              },
              body: JSON.stringify({ availability, vehicleType }),
            }
          );

          if (!response.ok) throw new Error("Failed to update vehicle");

          showMessage("Vehicle updated successfully!", "success");
          resetFormToAddMode();
          loadTableAndOtherStats();
        } catch (error) {
          console.error("Error updating vehicle:", error);
          showMessage("Error updating vehicle. Try again.", "error");
        }
      }

      function resetFormToAddMode() {
        const vehicleNumberInput = document.getElementById("vehicle_number");
        const availabilitySelect = document.getElementById("availability");
        const vehicleTypeInput = document.getElementById("vehicle_type");
        const submitBtn = document.querySelector(".btn-submit");
        const cancelBtn = document.querySelector(".btn-cancel");

        document.getElementById("addVehicleForm").reset();

        vehicleNumberInput.readOnly = false;
        availabilitySelect.disabled = false;
        vehicleTypeInput.readOnly = false;

        submitBtn.style.display = "inline-flex";
        submitBtn.innerHTML = '<i class="fas fa-plus"></i> Add Vehicle';
        submitBtn.style.background =
          "linear-gradient(135deg, #1a2a6c, #b21f1f)";
        submitBtn.onclick = null;

        cancelBtn.textContent = "Clear Form";
        cancelBtn.onclick = () =>
          document.getElementById("addVehicleForm").reset();
      }

      async function deleteVehicle(vehicleNumber) {
        try {
          const response = await fetch(
            `http://localhost:8080/admin/vehicleDelete/${vehicleNumber}`,
            {
              method: "DELETE",
              headers: { Authorization: `Bearer ${token}` },
            }
          );

          if (!response.ok) throw new Error("Failed to delete vehicle");

          showMessage("Vehicle deleted successfully!", "success");
          loadTableAndOtherStats();
        } catch (error) {
          console.error("Error deleting vehicle:", error);
          showMessage("Error deleting vehicle. Try again.", "error");
        }
      }

      function showMessage(text, type = "success") {
        const box = document.getElementById("messageBox");
        box.textContent = text;
        box.className = type === "success" ? "success" : "error";
        box.classList.remove("hidden");

        setTimeout(() => box.classList.add("hidden"), 3000);
      }

      document
        .getElementById("addVehicleForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          const vehicleNumber = document
            .getElementById("vehicle_number")
            .value.trim();
          const availability = document.getElementById("availability").value;
          const vehicleType = document
            .getElementById("vehicle_type")
            .value.trim();

          if (!vehicleNumber || !availability || !vehicleType) {
            showMessage("All fields are required!", "error");
            return;
          }

          try {
            const response = await fetch(
              "http://localhost:8080/admin/vehicleSave",
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                  Authorization: `Bearer ${token}`,
                },
                body: JSON.stringify({
                  vehicleNumber,
                  availability,
                  vehicleType,
                }),
              }
            );

            if (!response.ok) throw new Error("Failed to delete vehicle");

            showMessage("Vehicle added successfully!", "success");
            document.getElementById("addVehicleForm").reset();
            loadTableAndOtherStats();
          } catch (error) {
            console.error("Error saving vehicle:", error);
            showMessage("Error saving vehicle. Try again.", "error");
          }
        });
    </script>
  </body>
</html>
